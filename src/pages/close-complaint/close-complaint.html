<!--
  Generated template for the CloseComplaintPage page.
  
  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>close Complaint</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <form #f="ngForm" (ngSubmit)="f.form.valid && closeComplaint()">
    <div class="form">
      <ion-list no-lines class="padding10">
        
        
        <ion-item [ngClass]="{'error':f.submitted && closing_type?.invalid}">
          <ion-label floating>Closing Type<span>*</span></ion-label>
          <ion-select name="closing_type" #closing_type="ngModel" [(ngModel)]="formData.closing_type">
            <ion-option value="Service">Service</ion-option>
            <ion-option value="Replacement">Replacement</ion-option>
          </ion-select>
        </ion-item>
        <div *ngIf="f.submitted && closing_type.invalid" class="eror">
          <p *ngIf="closing_type.errors.required">{{'Field is Required'}}</p>
        </div>
        
        <div class="outline-btn scan" (click)="Scaning()" *ngIf="formData.closing_type == 'Replacement'">
          <div class="icons"><i class="material-icons">qr_code_scanner</i></div>
          {{'Scan'}}
        </div>
        
        <ion-item [ngClass]="{'error':f.submitted && serial_no?.invalid}" *ngIf="formData.closing_type == 'Replacement'">
          <ion-label floating>Serial No.<span>*</span></ion-label>
          <ion-input type="text" name="serial_no" #serial_no="ngModel" [(ngModel)]="formData.serial_no" required></ion-input>
        </ion-item>
        <div *ngIf="f.submitted && serial_no.invalid" class="eror">
          <p *ngIf="serial_no.errors.required">{{'Field is Required'}}</p>
        </div>
        
        <!-- <ion-item [ngClass]="{'error':f.submitted && category?.invalid}">
          <ion-label floating>Category<span>*</span></ion-label>
          <ion-select name="category" #category="ngModel" [(ngModel)]="formData.category" (ngModelChange)="get_sub_segment(formData.category)" required>
            <ion-option *ngFor="let row of segment_list"
            value="{{row.id}}">{{row.category}}</ion-option>
          </ion-select>
        </ion-item>
        <div *ngIf="f.submitted && category.invalid" class="eror">
          <p *ngIf="category.errors.required">{{'Field is Required'}}</p>
        </div> -->
        
        
        
        <ion-item [ngClass]="{'error':f.submitted && replacement_type?.invalid}" *ngIf="formData.closing_type == 'Replacement'">
          <ion-label floating>Replacement Type<span>*</span></ion-label>
          <ion-select name="replacement_type" #replacement_type="ngModel" [(ngModel)]="formData.replacement_type">
            <ion-option value="Dealer">Dealer</ion-option>
            <ion-option value="Company">Company</ion-option>
          </ion-select>
        </ion-item>
        <div *ngIf="f.submitted && replacement_type.invalid" class="eror">
          <p *ngIf="replacement_type.errors.required">{{'Field is Required'}}</p>
        </div>
        
        <ion-item [ngClass]="{'error':f.submitted && product_type?.invalid}" *ngIf="formData.closing_type == 'Replacement'">
          <ion-label floating>Product Type<span>*</span></ion-label>
          <ion-select name="product_type" #product_type="ngModel" [(ngModel)]="formData.product_type">
            <ion-option value="Reuse">Reuse</ion-option>
            <ion-option value="New">New</ion-option>
          </ion-select>
        </ion-item>
        <div *ngIf="f.submitted && product_type.invalid" class="eror">
          <p *ngIf="product_type.errors.required">{{'Field is Required'}}</p>
        </div>
        
        
        
        <ion-item [ngClass]="{'error':f.submitted && type?.invalid}">
          <ion-label floating>Remark <strong>*</strong></ion-label>
          <ion-textarea name="remarks" #remarks="ngModel" [(ngModel)]="formData.remarks"></ion-textarea>
        </ion-item>
        <div class="eror" *ngIf="f.submitted && remarks?.invalid">
          <p> {{ 'This field is required'}}</p>
        </div>
      </ion-list>
      
      
      
      <div class="upload-doc mt0" >
        <ul class="no-padding">
          
          <li class="image-upload" *ngFor="let pic of image_data;let i = index;">
            <img src="{{pic}}">
            <button class="del"><i class="material-icons" (click)="remove_image(i)">delete_sweep</i></button>
          </li>
          <li class="add_image mt0" (click)="image_data.length < 1 ?  captureMedia() : showLimit()">
            <img src="assets/imgs/upload_imae_icon.png" alt="">
            Upload Image Here
          </li>
        </ul>
      </div>
      
      <div *ngIf="Otp_verify==true"> 
        <ion-list class="mb20">
          <ion-item class="cs-textarea">
            <ion-input placeholder="Enter OTP" type="text"  (keypress)="MobileNumber($event)" (input)="verify_otp(formData.otp)"name="otp"  #otp="ngModel" [(ngModel)]="formData.otp" minLength="6" maxLength="6" required ></ion-input>
          </ion-item>
        </ion-list>
      </div>
      
      <div class="enquiry-btn add-btns mt20">
        <button ion-button  class="Buttons1" (click)="send_otp('Confirm');" *ngIf="sendOTP==false "><p>Confirm</p></button>
      </div>
      
      <div class="enquiry-btn add-btns mt20"  *ngIf=" OTP_flag==true">
        <button ion-button block class="h40 green-color" style="letter-spacing: 1px;" >
          <p> Submit</p>
        </button>
      </div>
    </div>
  </form>
</ion-content>
