<ion-header>
    <ion-navbar>
        <ion-title>Update Bank Information</ion-title>
    </ion-navbar>
</ion-header>

<ion-content>
    <form #f="ngForm" (ngSubmit)="f.form.valid && submit()">
        <div class="form">
            <ion-list no-lines class="padding10 pt0">                
                <ng-container>
                    <ng-container >
                        <ng-container >
                            <ion-list-header class="form-heading">
                                {{'Bank Information'}}
                            </ion-list-header>
                            <ion-item [ngClass]="{'error':f.submitted && account_holder_name?.invalid}">
                                <ion-label floating>{{'Account Holder Name'}}</ion-label>
                                <ion-input type="text" name="account_holder_name" ng-pattern-restrict
                                #account_holder_name="ngModel" [(ngModel)]="data.account_holder_name" required ></ion-input>
                            </ion-item>
                            <div *ngIf="f.submitted &&account_holder_name.invalid" class="eror">
                                <p *ngIf="account_holder_name.errors.required">{{'Field is Required'}}</p>
                            </div>
                            <ion-item [ngClass]="{'error':f.submitted && bank_name?.invalid}">
                                <ion-label floating>{{'Bank Name'}}</ion-label>
                                <ion-input type="text" name="bank_name " ng-pattern-restrict #bank_name="ngModel"
                                [(ngModel)]="data.bank_name" required></ion-input>
                            </ion-item>
                            <div *ngIf="f.submitted &&bank_name.invalid" class="eror">
                                <p *ngIf="bank_name.errors.required">{{'Field is Required'}}</p>
                            </div>
                            <ion-item [ngClass]="{'error':f.submitted && Account_no?.invalid}">
                                <ion-label floating>{{'Account No.'}}</ion-label>
                                <ion-input type="tel" name="Account_no " #Account_no="ngModel"
                                [(ngModel)]="data.account_no" minlength="9" maxlength="18" required></ion-input>
                            </ion-item>
                            <div *ngIf="f.submitted &&Account_no.invalid" class="eror">
                                <p *ngIf="Account_no.errors.required">{{'Field is Required'}}</p>
                            </div>
                            <ion-item [ngClass]="{'error':f.submitted && ifsc_code?.invalid}">
                                <ion-label floating>{{'IFSC Code'}}</ion-label>
                                <ion-input type="text" name="ifsc_code " #ifsc_code="ngModel"
                                [(ngModel)]="data.ifsc_code" pattern="^[A-Z]{4}[0][A-Z0-9]{6}$" required ></ion-input>
                            </ion-item>
                            <div *ngIf="ifsc_code.errors?.pattern" class="eror">
                                <div>{{'Invalid IFSC Code'}}</div>
                            </div>
                            <div *ngIf="f.submitted &&ifsc_code.invalid" class="eror">
                                <p *ngIf="ifsc_code.errors.required">{{'Field is Required'}}</p>
                            </div>
                            <ion-list-header class="form-heading">
                                {{'Document Information'}}
                            </ion-list-header>
                            <div class="outer-doc">
                                <div class="upload-document" (click)="onUploadChange()">
                                    <p *ngIf="documentImageFlag == false">
                                        <i class="material-icons">add_circle</i><br>{{'Upload Document front side'}}
                                    </p>
                                    <img src="{{data.doc_edit_id ? uploadurl+data.document_image : data.document_image}}"
                                    *ngIf="documentImageFlag == true">
                                </div>
                                <div class="upload-document mt15" (click)="onUploadBackChange()">
                                    <p *ngIf="documentBackImageFlag == false"><i
                                        class="material-icons">add_circle</i><br>{{'Upload Document back side'}}
                                    </p>
                                    <img src="{{data.doc_back_edit_id ? uploadurl+data.document_image_back : data.document_image_back}}"
                                    *ngIf="documentBackImageFlag == true">
                                </div>
                            </div>
                            
                            <ion-item [ngClass]="{'error':f.submitted && adhar_no?.invalid}">
                                <ion-label floating>{{'Document Number'}}</ion-label>
                                <ion-input type="tel" name="adhar_no" #adhar_no="ngModel" [(ngModel)]="data.adhar_no"
                                maxlength="12" minlength="12"></ion-input>
                            </ion-item>
                            <ion-list-header class="form-heading">
                                {{'Pan Card Information'}}
                            </ion-list-header>
                            
                            <div class="outer-doc">
                                <div class="upload-document mt15" (click)="onUploadPan()">
                                    <p *ngIf="panImageFlag == false"><i
                                        class="material-icons">add_circle</i><br>{{'Upload Pan Card'}}</p>
                                        <img src="{{data.doc_pan_id ? uploadurl+data.pan_img : data.pan_img}}"
                                        *ngIf="panImageFlag == true">
                                    </div>
                                </div>
                                <ion-item [ngClass]="{'error':f.submitted && pan_no?.invalid}">
                                    <ion-label floating>{{'Pan Card Number'}}</ion-label>
                                    <ion-input type="text" name="pan_no" #pan_no="ngModel" [(ngModel)]="data.pan_no"
                                    class="uppercase" pattern="[A-z]{5}[0-9]{4}[A-z]{1}"></ion-input>
                                </ion-item>
                                <div *ngIf="pan_no.errors?.pattern" class="eror">
                                    <div>{{'Invalid Pan Card Number'}}</div>
                                </div>
                             
                                <div class="outer-doc">
                                    <div class="upload-document mt15"
                                    (click)="onUploadBankImg()">
                                    <p *ngIf="bankImageFlag == false"><i class="material-icons">add_circle</i><br>{{'Upload Cheque/Passbook '}}</p>
                                    <img src="{{data.bank_img_id ? uploadurl+data.bank_img :  data.bank_img}}"
                                    *ngIf="bankImageFlag == true">
                                </div>
                            </div>
                        </ng-container>
                    </ng-container>
                    
                    
                </ng-container>
                
            </ion-list>
            <div class="pl10 pr10">
                <button ion-button full color="primary" [disabled]="savingFlag == true">
                    Update
                </button>
            </div>
        </div>
    </form>
</ion-content>
